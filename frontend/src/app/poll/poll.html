<div class="container py-5 mb-5" style="max-width: 800px;">

  <!-- CREATE POLL CARD -->
  <div class="card shadow-sm mb-5">
    <div class="card-body">
      <h4 class="card-title mb-4">Create Poll</h4>

      <div class="mb-3">
        <label class="form-label">Question</label>
        <input
          type="text"
          class="form-control"
          placeholder="Enter question"
          [(ngModel)]="newPollQuestion"
        />
      </div>

      <div
        *ngFor="let opt of newOptions; let i = index; trackBy: trackByIndex"
        class="input-group mb-2"
      >
        <span class="input-group-text">
          {{ i + 1 }}
        </span>

        <input
          type="text"
          class="form-control"
          placeholder="Option {{ i + 1 }}"
          [(ngModel)]="newOptions[i]"
        />

        <button
          class="btn btn-outline-danger"
          type="button"
          (click)="removeOptionField(i)"
          *ngIf="newOptions.length > 2"
        >
          Remove
        </button>
      </div>

      <div class="d-flex gap-2 mt-3">
        <button
          type="button"
          class="btn btn-secondary"
          (click)="addOptionField()"
        >
          + Add Option
        </button>

        <button
          type="button"
          class="btn btn-primary"
          (click)="createPoll()"
        >
          Create Poll
        </button>
      </div>
    </div>
  </div>

  <!-- POLL LIST -->
  <h4 class="mb-3">Available Polls</h4>

  <div
    *ngFor="let poll of polls; trackBy: trackById"
    class="card shadow-sm mb-4"
  >
    <div class="card-body">

      <h5 class="card-title mb-3">
        {{ poll.question }}
      </h5>

      <div
        *ngFor="let option of poll.options; let i = index"
        class="mb-2"
      >
        <button
          type="button"
          class="btn btn-outline-primary w-100 text-start d-flex justify-content-between"
          (click)="vote(poll.id!, i)"
        >
          <span>{{ option.optionText }}</span>
          <span class="badge bg-primary">
            {{ option.voteCount }} votes
          </span>
        </button>
      </div>

    </div>
  </div>

</div>

<!-- FIXED FOOTER -->
<footer class="bg-dark text-white text-center py-3 fixed-bottom shadow">
  Â© 2026 Copyright Reserved by 
  <a 
    href="https://youtube.com/@code-with-Bharadwaj"
    target="_blank"
    class="text-warning text-decoration-none fw-bold ms-1"
  >
    Bharadwaj
  </a>
</footer>
